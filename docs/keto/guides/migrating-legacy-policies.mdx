---
id: migrating-legacy-policies
title: Migrating policies from 0.5 to 0.6
---

With 0.6 release Ory Keto implements [Zanzibar: Googleâ€™s Consistent, Global Authorization System](https://research.google/pubs/pub48190/):

> Zanzibar provides a uniform data model and configuration language for expressing a wide range of access control policies from hundreds of client services at Google, including Calendar, Cloud, Drive, Maps, Photos, and YouTube. Its authorization decisions respect causal ordering of user actions and thus provide external consistency amid changes to access control lists and object contents. Zanzibar scales to trillions of access control lists and millions of authorization requests per second to support services used by billions of people. It has maintained 95th-percentile latency of less than 10 milliseconds and availability of greater than 99.999% over 3 years of production use.

0.6 release makes Ory Access Control Policy DSL modeled after AWS IAM Policies obsolete. This guide will help you to rewrite your policies in to [relation-tuples](https://www.ory.sh/docs/keto/concepts/relation-tuples)

## Legacy rules example

The policy below allows `Alice` and `Bob` to create/read/modify/delete `blog_posts:my-first-blog-post`, `blog_posts:2`, and `blog_posts:3`.

```json
{
  "subjects": ["alice", "bob"],
  "resources": [
    "blog_posts:my-first-blog-post",
    "blog_posts:2",
    "blog_posts:3"
  ],
  "actions": ["delete", "create", "read", "modify"],
  "effect": "allow"
}
```

## Rewriting it to relation tuples

According to the example above we need to create required [namespace](https://www.ory.sh/docs/keto/concepts/namespaces) and [relationship tuple](https://www.ory.sh/docs/keto/concepts/relation-tuples)

Let's add the following content to `keto.yml` file

```yaml
namespaces:
  - id: 0
  name: blog_posts
```

## Alice relationship tuples

```
blog_posts:my-first-blog-post#read@alice
blog_posts:my-first-blog-post#modify@alice
blog_posts:my-first-blog-post#delete@alice
blog_posts:my-first-blog-post#create@alice
blog_posts:2#read@alice
blog_posts:2#modify@alice
blog_posts:2#delete@alice
blog_posts:2#create@alice
blog_posts:3#read@alice
blog_posts:3#modify@alice
blog_posts:3#delete@alice
blog_posts:3#create@alice
```

## Bob relationship tuples

```
blog_posts:my-first-blog-post#read@bob
blog_posts:my-first-blog-post#modify@bob
blog_posts:my-first-blog-post#delete@bob
blog_posts:my-first-blog-post#create@bob
blog_posts:2#read@bob
blog_posts:2#modify@bob
blog_posts:2#delete@bob
blog_posts:2#create@bob
blog_posts:3#read@bob
blog_posts:3#modify@bob
blog_posts:3#delete@bob
blog_posts:3#create@bob
```

## Next steps

- [Check whether a User has Access to Something](https://www.ory.sh/docs/keto/guides/simple-access-check-guide)
- [List API: Display all Objects a User has Access to](https://www.ory.sh/docs/keto/guides/list-api-display-objects)
